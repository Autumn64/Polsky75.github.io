<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Виселица!</title>
	<style>table.gridtable {
	font-family: verdana,arial,sans-serif; 
	font-size:11px;
	color:#333333;
	border-width: 1px;
	border-color: #666666;
	border-collapse: collapse;
}
table.gridtable th {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #dedede;
}
table.gridtable td {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #ffffff;
}</style>
</head>

<body>
	<h1 id="x"></h1>
	<h1 id="y"></h1>
    <h1 id="z"></h1>	
  
	<div id="content"></div>
	
	
	
	
</body>
<canvas id = "canvas" width="200" height="200"></canvas>
<script src="https://code.jquery.com/jquery-2.1.0.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script> 
	<script>
			var canvas = document.getElementById("canvas")
		var ctx= canvas.getContext("2d")
	ctx.lineWidth = 4;
	ctx.strokeStyle = "Black"
	ctx.fillStyle = "Black" 
	var draw_points = function (massive,n) {
		for (var i = 0; i < massive.length;i++) {
			ctx.beginPath();
			ctx.moveTo(massive[i][0],massive[i][1])
			if(i+1<massive.length){
			ctx.lineTo(massive[i+1][0],massive[i+1][1]);
			ctx.stroke();
			}
			else if (n===1){
			ctx.lineTo(massive[0][0],massive[0][1])
			ctx.stroke();
			}
		}
	
	}
	var circle = function (x,y,radius,fillCircle) {
	ctx.fillStyle = "Purple"
	ctx.strokeStyle = "Black"
	ctx.lineWidth = 1
  	ctx.beginPath();
  	ctx.arc(x, y, radius, 0, Math.PI * 2, false);
    	ctx.stroke();
  	}
	var massA=[[30,60],[15,90]]
	var massB=[[30,60],[45,90]]
	var massC=[[30,30],[30,60]]
	var massD=[[30,40],[10,35]]
	var massE=[[30,40],[50,35]]
	var now = new Date();
	var o = 5;
//var formated_date = now.format("yyyy-mm-dd HH:mm");
var aaa1 = [];	
        var a = [
	    ["арбуз","Сам алый, сахарный, \nКафтан зеленый, бархатный."],	
            ["программа", "достижение 20 века"],
            ["мартышка", "У нее были очки"],
            ["оладушек", "Не блинчик :)"],
            ["кошка", "она гуляет сама по себе"],
            ["банан", "В кожуре он золотой,\nВесь изогнутый такой\nПривезён из дальних стран\nМягкий, вкусный фрукт"],
            ["пальма", "Мы с ним добрые друзья – \nЭто дерево и я.\nЯ – кокос красивый, сочный.\nНазовите друга срочно."],
            ["апельсин", "Я - сладкий, рос на юге.\nКак солнышко в листве.\nОранжевый и круглый,\nЯ нравлюсь детворе."],
            ["яблоко", "Покуда было маленьким,\nНе падало оно,\nА выросло-упало,\nНе правда ли, смешно?"],
            ["парашют", "Тучек нет на горизонте,\nНо раскрылся в небе зонтик.\nЧерез несколько минут\nОпустился…"],
            ["часы", "Ног нет, а хожу,\nРта нет, а скажу,\nКогда спать, когда вставать,\nКогда работу начинать."],
            ["язык", "Всегда он в работе,\nКогда говорим,\nА отдыхает,\nКогда мы молчим."],
	    ["кит","То взрежет волны, словно крейсер,\nРазгонит их блестящий строй,\nТо, словно вынырнувший гейзер,\nСверкнёт дымящейся струёй."]
            ["радио", "В Москве говорят, а у нас слышно."],
            ["дятел", "Плотник острым долотом\nСтроит дом с одним окном."],
            ["градусник", "Я подмышкой посижу и что делать укажу:\nИли уложу в кровать, или разрешу гулять."],
            ["еж", "Сердитый недотрога\nЖивет в глуши лесной.\nИголок очень много,\nА нитки не одной."],
            ["тропинка", "Все меня топчут, а я все лучше."],
            ["газета", "Языка не имеет,\nА у кого побывает,\nТот много знает."],
            ["ковер", "Я и дом украшаю,\nЯ и пыль собираю.\nА меня люди топчут ногами,\nДа потом ещё бьют батогами."],
            ["время", "Без ног и без крыльев оно,\nБыстро летит, не догонишь его."],
            ["телефон", "Через поле и лесок подается голосок.\n Он бежит по проводам — Скажешь здесь, а слышно там."],
	    ["свинья","Ходит с визгом,\n Грязь разбрызгав."]		
        ];
	var drawKeyboard = function(x,y){
	ctx.fillStyle = "Black"
	circle(x+15,y+10,10)
	ctx.textBaseline = "middle"
	ctx.textAlign = "center"
	ctx.fillText("Й",x+15,y+10)
	circle(x+30,y+10,10)
	ctx.fillText("Ц",x+30,y+10)
	circle(x+45,y+10,10)
	ctx.fillText("У",x+45,y+10)
	}
	drawKeyboard(0,90)
	var pick = function(){
	return a[Math.floor(Math.random() * a.length)];
	}
        var slovo = pick()
        var a1 = slovo[0];
        var podskazka = slovo[1];
      var b = [];
	var setup = function(word){
	   for (var i = 0; i < word.length; i++) {
        b[i] = "_ ";
	}
	}
	setup(a1)
        var c = a1.length;
        var aa = 0
		var XLaa=a1.length + 2
        var aa1 = prompt("Как вас зовут?")
		var aaa=aa1.length
        	var shoo = function(ant){
 	alert("Привет, " + aa1 + "! "+ "Подсказка:\n" + podskazka + "\nВ слове " + ant.length + " букв")
     Swal.fire({title:"Хорошая игра, " + aa1 + "!",text: "Чтобы обновить страницу, нажмите F5",type: "info",confirmButtonText:"Сыграем ещё?"})
		}
		shoo(a1);
        while (c > 0 && aa < a1.length + 2) {
		var show = function(answer_arr){
            alert(answer_arr.join(""));
		}
		show(b);
		var get = function(){
		return prompt("Угадайте букву, или нажмите Отмена для выхода из игры.")
		}
            var d = get()
	    var update = function(guess,word,answer_arr){
 	for (var j = 0; j < 5; j++) {
                 if (word[j] === guess.toLowerCase() && answer_arr[j] === "_ ") {
                     answer_arr[j] = guess.toLowerCase();
                     c--;
                 }
	}
	}
            if (d === null) {
			var rrr="Вы вышли из игры. До новых встреч!"
			$("#x").text(rrr).css({ 'color': 'red', 'font-size': '16px' });
                break;
            } else if (d.length !== 1 && d.toLowerCase() !== a1) {
                alert("Пожалуйста, введите одиночную букву.");
            } else if (d.toLowerCase() === a1) {
                break;
            } else {
              update(d,a1,b)
                }
                aa++;
		if(aa===1){
		ctx.strokeRect(20,10,20,20);
		o--
		}else if(aa===2){
		draw_points(massC);
		o--
		}else if(aa===3){
		draw_points(massA);
		o--
		}else if(aa===4){
		draw_points(massB);
		o--
		}else{
		draw_points(massD);
		draw_points(massE);
		o--
		}
	}
        var str = b.join('');
        if (str.toLowerCase() !== a1.toLowerCase() && d.toLowerCase() !== a1.toLowerCase()) {
         var rr= "К сожалению,вы проиграли. Попрбуйте ещё раз. Было загадано слово "+ a1+". "
		 	$("#x").text(rr).css({ 'color': 'red', 'font-size': '16px' });
			aaa1.push({"Дата":now.toLocaleString(),"Имя":aa1,"Очки":0});
        } else {
                var win = function(answer_arr){
		var r = "Поздравляю с победой, " + aa1 + "! Было загадано слово " +answer_arr +". Вы набрали " + o + " очков!"
		$("#x").text(r).css({ 'color': 'red', 'font-size': '16px' });
		}
		win(a1);
        var cat="=^.^="
		if (aaa===5||aaa===4){;
		aaa1.push({"Дата":now.toLocaleString(),"Имя":aa1,"Очки":o});
		$("#y").text(cat).css({ 'color': 'orange', 'font-size': '20px' });
		}else{
		aaa1.push({"Дата":now.toLocaleString(),"Имя":aa1,"Очки":o});
		$("#y").text("   ").css({ 'color': 'orange', 'font-size': '20px' });
        }
	}
	
	function buildTable(data) {
    var table = document.createElement("table");
    table.className="gridtable";
    var thead = document.createElement("thead");
    var tbody = document.createElement("tbody");
    var headRow = document.createElement("tr");
    ["Дата","Имя","Очки"].forEach(function(el) {
      var th=document.createElement("th");
      th.appendChild(document.createTextNode(el));
      headRow.appendChild(th);
    });
    thead.appendChild(headRow);
    table.appendChild(thead); 
    data.forEach(function(el) {
      var tr = document.createElement("tr");
      for (var o in el) {  
        var td = document.createElement("td");
        td.appendChild(document.createTextNode(el[o]))
        tr.appendChild(td);
      }
      tbody.appendChild(tr);  
    });
    table.appendChild(tbody);             
    return table;
}
//java.io.File f = new java.io.File(aaa1)	
	
		document.getElementById("content").appendChild(buildTable(aaa1));
	
	</script> 
	
</html>
